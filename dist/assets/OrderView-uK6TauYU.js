import{d as E,j as K,r as b,a as o,c as P,b as e,w as t,F as A,o as G,g as i,e as r,u as C,t as _,n as H,x as D,p as J,f as Q,_ as R}from"./index-UUeNv-ow.js";import{h as W,i as X}from"./index-hVcYNRJg.js";const Z=v=>(J("data-v-3ff32572"),v=v(),Q(),v),ee={class:"card_head"},te={class:"card_body"},le={class:"card_bottom"},oe=["id"],ae={class:"cell-item"},ne={class:"cell-item"},se={class:"cell-item"},re={class:"cell-item"},de={class:"cell-item"},ce=Z(()=>i("h4",null,"果蔬详情",-1)),ie=E({__name:"OrderView",setup(v){K(()=>{f()});const d=b({records:[],total:20,current:1,size:10}),u=b({oid:"",date:[]}),n=b({visible:!1,title:"订单详情",order:{},detail:[]}),V=async a=>{console.log(a),n.value.visible=!0,n.value.title="订单详情",n.value.order=a;const l=await X(a.id);n.value.detail=l,console.log(n.value.detail)},f=async()=>{console.log("refresh");const a=u.value,l=await W(d.value.current,d.value.size,a.oid,a.date[0],a.date[1]);console.log(l),d.value=l},z=async()=>{console.log(u.value.date),f()},x=a=>{console.log(`current page: ${a}`),d.value.current=a,f()},k=()=>{console.log(u.value.oid),f()},T=[{text:"最近一周",value:()=>{const a=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*7),[l,a]}},{text:"最近一个月",value:()=>{const a=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*30),[l,a]}},{text:"最近三个月",value:()=>{const a=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*90),[l,a]}}];return(a,l)=>{const Y=o("el-input"),g=o("el-col"),M=o("el-date-picker"),h=o("el-button"),S=o("el-row"),c=o("el-table-column"),I=o("el-button-group"),w=o("el-table"),O=o("el-pagination"),U=o("el-card"),B=o("user"),p=o("el-icon"),m=o("el-descriptions-item"),F=o("iphone"),N=o("Money"),j=o("office-building"),L=o("el-descriptions"),$=o("el-divider"),q=o("el-drawer");return G(),P(A,null,[e(U,{class:"card"},{default:t(()=>[i("div",ee,[e(S,{gutter:20},{default:t(()=>[e(g,{span:4},{default:t(()=>[e(Y,{size:"large","prefix-icon":"Search",autocomlpete:"off",placeholder:"请输入订单号",modelValue:u.value.oid,"onUpdate:modelValue":l[0]||(l[0]=s=>u.value.oid=s),onInput:k},null,8,["modelValue"])]),_:1}),e(g,{span:9},{default:t(()=>[e(M,{size:"large",type:"daterange","unlink-panels":"","range-separator":"To","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",shortcuts:T,modelValue:u.value.date,"onUpdate:modelValue":l[1]||(l[1]=s=>u.value.date=s),onChange:z},null,8,["modelValue"])]),_:1}),e(g,{span:4},{default:t(()=>[e(h,{icon:"Search",size:"large",type:"primary"},{default:t(()=>[r("搜索")]),_:1})]),_:1})]),_:1})]),i("div",te,[e(w,{data:d.value.records,style:{width:"100%"},border:""},{default:t(()=>[e(c,{prop:"id",label:"订单号"}),e(c,{prop:"user.username",label:"用户"}),e(c,{prop:"create_time",label:"下单时间"}),e(c,{prop:"totalprice",label:"金额"}),e(c,{label:"操作"},{default:t(({row:s})=>[e(I,null,{default:t(()=>[e(h,{circle:"",plain:"",type:"warning",icon:C(D),onClick:y=>V(s)},null,8,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),i("div",le,[e(O,{"current-page":d.value.current,"onUpdate:currentPage":l[2]||(l[2]=s=>d.value.current=s),"page-size":d.value.size,"onUpdate:pageSize":l[3]||(l[3]=s=>d.value.size=s),layout:"total, prev, pager, next, jumper",total:d.value.total,onCurrentChange:x},null,8,["current-page","page-size","total"])])]),_:1}),e(q,{size:"50%",modelValue:n.value.visible,"onUpdate:modelValue":l[4]||(l[4]=s=>n.value.visible=s),"show-close":!0},{header:t(({titleId:s,titleClass:y})=>[i("h4",{id:s,class:H(y)},_(n.value.title),11,oe)]),default:t(()=>[e(L,{class:"margin-top",title:"用户信息",column:2,border:""},{default:t(()=>[e(m,null,{label:t(()=>[i("div",ae,[e(p,null,{default:t(()=>[e(B)]),_:1}),r(" 用户名 ")])]),default:t(()=>[r(" "+_(n.value.order.user.username),1)]),_:1}),e(m,null,{label:t(()=>[i("div",ne,[e(p,null,{default:t(()=>[e(F)]),_:1}),r(" 电话 ")])]),default:t(()=>[r(" "+_(n.value.order.user.phone),1)]),_:1}),e(m,null,{label:t(()=>[i("div",se,[e(p,null,{default:t(()=>[e(N)]),_:1}),r(" 总价 ")])]),default:t(()=>[r(" "+_(n.value.order.totalprice)+"元 ",1)]),_:1}),e(m,null,{label:t(()=>[i("div",re,[e(p,null,{default:t(()=>[e(j)]),_:1}),r(" 地址 ")])]),default:t(()=>[r(" "+_(n.value.order.address.detail),1)]),_:1}),e(m,null,{label:t(()=>[i("div",de,[e(p,null,{default:t(()=>[e(C(D))]),_:1}),r(" 备注 ")])]),default:t(()=>[r(" "+_(n.value.order.comment),1)]),_:1})]),_:1}),e($),ce,e(w,{data:n.value.detail,border:""},{default:t(()=>[e(c,{prop:"id",label:"id"}),e(c,{prop:"dish.name",label:"名称"}),e(c,{prop:"quantity",label:"数量"}),e(c,{prop:"price",label:"价格"}),e(c,{prop:"mark",label:"评分"})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}}),pe=R(ie,[["__scopeId","data-v-3ff32572"]]);export{pe as default};
