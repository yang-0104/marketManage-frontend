import{j as S,k as U,b as D}from"./index-hVcYNRJg.js";import{d as B,j as J,r as N,a as s,l as V,w as l,o as v,g as _,b as a,e as p,t as i,c as j,m as y,p as E,f as R,_ as G}from"./index-UUeNv-ow.js";const M=m=>(E("data-v-c3c2e1eb"),m=m(),R(),m),P={class:"card-header"},T=M(()=>_("h2",null,"店铺信息修改",-1)),q={class:"card_body"},z=["src"],A=B({__name:"SettingView",setup(m){J(()=>{g()});const e=N({}),g=async()=>{console.log("刷新店铺信息");const d=await S();e.value=d},b=async()=>{console.log("submit!"),await U(e.value)&&g()},w=async d=>{y.success("上传中..."),console.log("上传头像"),console.log(d);const t=new FormData;t.append("smfile",d.file);const u=await D.post("/image",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"EbGJXCofcjs7WYDGf1KN5p6JuxJew8pJ"}}),c=u.data;if(c.success){console.log(u);const f=c.data.url;e.value.cover=f}else e.value.cover=c.images;y.success("头像上传成功")};return(d,t)=>{const u=s("el-tag"),c=s("Plus"),f=s("el-icon"),h=s("el-upload"),n=s("el-form-item"),r=s("el-input"),x=s("el-switch"),k=s("el-button"),C=s("el-form"),I=s("el-card");return v(),V(I,{class:"card"},{header:l(()=>[_("div",P,[T,_("div",null,[a(u,{type:"warning",effect:"dark",style:{"margin-left":"10px"}},{default:l(()=>[p(" 评分:"+i(e.value.mark),1)]),_:1}),a(u,{type:"success",effect:"dark",style:{"margin-left":"10px"}},{default:l(()=>[p(" 总销量:"+i(e.value.sale),1)]),_:1}),a(u,{effect:"dark",style:{"margin-left":"10px"}},{default:l(()=>[p(" 营业时间:"+i(e.value.regtime),1)]),_:1})])])]),default:l(()=>[_("div",q,[a(C,{model:e.value,"label-width":"80px",autocomplete:"off"},{default:l(()=>[a(n,{label:"店铺封面"},{default:l(()=>[a(h,{class:"avatar-uploader","show-file-list":!1,"http-request":w},{default:l(()=>[e.value.cover?(v(),j("img",{key:0,src:e.value.cover,class:"avatar-uploader-img"},null,8,z)):(v(),V(f,{key:1,class:"avatar-uploader-icon"},{default:l(()=>[a(c)]),_:1}))]),_:1})]),_:1}),a(n,{label:"店铺名称"},{default:l(()=>[a(r,{modelValue:e.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.name=o),placeholder:"为店铺起个朗朗上口的名字"},null,8,["modelValue"])]),_:1}),a(n,{label:"店铺电话"},{default:l(()=>[a(r,{modelValue:e.value.phone,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.phone=o),placeholder:"食客怎么联系您呢？"},null,8,["modelValue"])]),_:1}),a(n,{label:"店铺密码"},{default:l(()=>[a(r,{modelValue:e.value.password,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.password=o),type:"password",placeholder:"不更改留空"},null,8,["modelValue"])]),_:1}),a(n,{label:"营业状态"},{default:l(()=>[a(x,{modelValue:e.value.status,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.status=o),"active-value":1,"inactive-value":0},null,8,["modelValue"]),a(u,{type:e.value.status==1?"success":"danger",effect:"dark",style:{"margin-left":"10px"}},{default:l(()=>[p(i(e.value.status==1?"营业":"停业"),1)]),_:1},8,["type"])]),_:1}),a(n,{label:"店铺地址"},{default:l(()=>[a(r,{modelValue:e.value.address,"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.address=o),type:"textarea",placeholder:"线下探店来这里！"},null,8,["modelValue"])]),_:1}),a(n,{label:"店铺通知"},{default:l(()=>[a(r,{modelValue:e.value.announce,"onUpdate:modelValue":t[5]||(t[5]=o=>e.value.announce=o),type:"textarea",placeholder:"想告诉进店的用户什么？"},null,8,["modelValue"])]),_:1}),a(n,null,{default:l(()=>[a(k,{type:"primary",onClick:b},{default:l(()=>[p("保存变更")]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1})}}}),W=G(A,[["__scopeId","data-v-c3c2e1eb"]]);export{W as default};
